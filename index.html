<html>

<body>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    async function getFriendship() {
      const friend = await liff.getFriendship()
      const queryString = decodeURIComponent(window.location.search);
      const item = new URLSearchParams(queryString);
      const param = item.get('item')
      const URL = 'https://www.royalchitraladaprojects.org/'

      if (friend.friendFlag) {
        window.location = URL + param
      } else {
        if (confirm('กรุณาเพิ่มเพื่อน LINE Official Account ก่อนเพื่อดำเนินการต่อไป')) {
          window.location = 'https://line.me/R/ti/p/@405cnjlw'
        }
      }
    }

    async function main() {
      liff.ready.then(() => {
        if (liff.isLoggedIn()) {
          getFriendship()
        } else {
          liff.login()
        }
      });
      await liff.init({ liffId: '2004757243-36584QdN' })
    }
    main()
  </script>
</body>

</html>